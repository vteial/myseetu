<sign-up>

    <header class="header-bar">
        <button class="btn pull-left icon icon-arrow-back"
                data-navigation="$previous-page"></button>
        <div class="center">
            <h1 class="title">{ moduleName }</h1>
        </div>
    </header>

    <div class="content">
        <div class="padded-full">
            <div class="input-wrapper">
                <label class="floating-label" for="userUserId">User Id</label>
                <input class="with-label" type="email" required
                        id="userUserId">
            </div>
            <div class="input-wrapper">
                <label class="floating-label" for="userPassword">Password</label>
                <input class="with-label" type="password" required
                       id="userPassword">
            </div>
            <div class="input-wrapper">
                <label class="floating-label" for="userRetypePassword">Retype Password</label>
                <input class="with-label" type="password" required
                       id="userRetypePassword">
            </div>
            <div class="input-wrapper">
                <label class="floating-label" for="userFirstName">First Name</label>
                <input class="with-label" type="text" required
                       id="userFirstName">
            </div>
            <div class="input-wrapper">
                <label class="floating-label" for="userLastName">Last Name</label>
                <input class="with-label" type="text" required
                       id="userLastName">
            </div>
            <ul class="list">
                <li class="">
                    <label class="checkbox">
                        <input class="" type="checkbox" id="userIagree">
                        I agree the Terms and Conditions
                        <span></span>
                    </label>
                </li>
             </ul>

            <div class="padded-top text-center">
                <button class="btn pull-left" onclick="{ reset }">Reset</button>
                <a href="#!sign-in" id="signIn">Sign In</a>
                <button class="btn primary pull-right" onclick="{ signUp }">Sign Up</button>
            </div>
        </div>
    </div>

    <script>
        var self = this, moduleId = 'sign-up', moduleName = 'Sign Up'
        this.moduleName = moduleName

        this.on('close', function (self) {
            console.log(moduleId + ' close started...')
            self.close()
            console.log(moduleId + ' close finished...')
        });

        reset() {
            this.userUserId.value = ''
            this.userPassword.value = ''
            this.userRetypePassword.value = ''
            this.userFirstName.value = ''
            this.userLastName.value = ''
            this.userIagree.checked = false
        }

        var successSignUp = function(res) {
            if(res.type === 0) {
                var alert = phonon.alert(res.message, 'Success', false, 'Ok')
                alert.on('confirm', function () {
                    this.userUserId.value = ''
                    this.userPassword.value = ''
                    this.userRetypePassword.value = ''
                    this.userFirstName.value = ''
                    this.userLastName.value = ''
                    this.userIagree.checked = false

                    //phonon.navigator().changePage('sign-in')
                    this.signIn.click()
                })
            } else {
                phonon.notif(res.message, 3000, false);
            }
        }

        var failSignUp = function(res) {
            phonon.notif(res.message, 3000, false);
        }

        signUp() {
            var user = {
                userId : this.userUserId.value,
                password : this.userPassword.value,
                retypePassword : this.userRetypePassword.value,
                firstName : this.userFirstName.value,
                lastName : this.userLastName.value
            }
            sessionService.signUp(user, successSignUp, failSignUp)
        }


    </script>

</sign-up>